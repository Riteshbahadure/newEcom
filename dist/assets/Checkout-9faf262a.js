import{b as k,f as u,D as C,a as E,r as b,B as F,h as j,o as M,p as i,j as e,L as O,F as S,E as q,G as r,H as m}from"./index-477aaa6f.js";import{N as D,F as $}from"./Footer-9ca33b00.js";import{c as R}from"./index-9752a38d.js";const G=()=>{const o=k(),{user:p}=u(s=>s.auth),{cart:a}=u(s=>s.public),[N,{isSuccess:x}]=C(),n=E(),[c,g]=b.useState(a.reduce((s,t)=>(s[t.id]=1,s),{})),h=(s,t)=>{g(l=>{const d={...l,[s]:l[s]+t};return d[s]<1&&(d[s]=1),d})},f=a.reduce((s,t)=>s+t.price*c[t.id],0);b.useEffect(()=>{x&&(F.success("Order placed successfully"),n(j()),o("/success"))},[x,n,o]);const v={name:"",address:"",mobile:"",paymentMethod:"Cash On Delivery"},y=M({name:i().required("Name is required"),address:i().required("Address is required"),mobile:i().required("Mobile Number is required").matches(/^[0-9]+$/,"Must be a valid number")}),w=s=>{const t=a.map(l=>l._id);N({products:t,customer:p._id,...s})};return!a||a.length===0?e.jsxs("div",{className:"h-screen flex flex-col justify-center items-center",children:[e.jsx("h1",{className:"text-2xl font-semibold mb-4",children:"Cart is Empty"}),e.jsx(O,{to:"/",className:"btn btn-primary",children:"Go to Shop"})]}):e.jsxs(e.Fragment,{children:[e.jsx(D,{}),e.jsx("div",{className:"container mx-auto my-10 px-4",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2 bg-white shadow-lg rounded-lg p-6",children:[e.jsx("h2",{className:"text-3xl font-bold mb-6",children:"Shopping Cart"}),e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("div",{children:e.jsx("p",{className:"text-gray-500",children:"Delivering to 382480"})}),e.jsx("button",{onClick:()=>n(j()),className:"btn btn-danger",children:"Empty Cart"})]}),e.jsxs("div",{className:"alert alert-success",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"stroke-current shrink-0 h-6 w-6 mr-2",fill:"none",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("span",{children:"You've got FREE delivery. Start checkout now!"})]}),a.map(s=>e.jsxs("div",{className:"mt-14 flex items-center justify-between mb-6 border-b pb-4 transition duration-300 ease-in-out transform hover:scale-105 hover:shadow-lg",children:[e.jsx("img",{className:"w-20 h-20 object-cover rounded-lg shadow-md",src:`https://newecom-sdul.onrender.com/${s.image}`,alt:s.name}),e.jsxs("div",{className:"ml-4 flex-grow",children:[e.jsx("h1",{className:"font-bold text-lg",children:s.name}),e.jsx("p",{className:"text-gray-500",children:s.desc}),e.jsxs("button",{className:"flex items-center text-red-500 mt-2",onClick:()=>{},children:[e.jsx(R,{className:"mr-1"})," Remove"]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("button",{onClick:()=>h(s.id,-1),className:"btn btn-outline mr-2 max-sm:mr-0",children:"-"}),e.jsx("span",{className:"mx-2",children:c[s.id]}),e.jsx("button",{onClick:()=>h(s.id,1),className:"btn btn-outline ml-2 max-sm:ml-0",children:"+"})]}),e.jsxs("div",{className:"font-bold ml-3 text-xl",children:["Rs.",s.price*c[s.id]]})]},s.id))]}),e.jsxs("div",{className:"bg-white shadow-xl rounded-lg p-6 flex flex-col justify-center",children:[e.jsx("h2",{className:"text-3xl font-bold mb-6 lg:mb-0 lg:-mt-10  text-center",children:"Your Details"}),e.jsx(S,{initialValues:v,validationSchema:y,onSubmit:w,children:({isSubmitting:s})=>e.jsxs(q,{children:[e.jsxs("div",{className:"mb-4 lg:mt-12",children:[e.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Name"}),e.jsx(r,{type:"text",name:"name",placeholder:"Enter your name",className:"input input-bordered w-full"}),e.jsx(m,{name:"name",component:"div",className:"text-red-500 text-sm mt-1"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Address"}),e.jsx(r,{type:"text",name:"address",placeholder:"Enter your address",className:"input input-bordered w-full"}),e.jsx(m,{name:"address",component:"div",className:"text-red-500 text-sm mt-1"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Mobile"}),e.jsx(r,{type:"number",name:"mobile",placeholder:"Enter your mobile number",className:"input input-bordered w-full"}),e.jsx(m,{name:"mobile",component:"div",className:"text-red-500 text-sm mt-1"})]}),e.jsxs("div",{className:"mb-4 lg:mt-7",children:[e.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Payment Method"}),e.jsxs("div",{className:"flex items-center lg:mt-2",children:[e.jsx(r,{type:"radio",id:"cod",name:"paymentMethod",value:"Cash On Delivery",checked:!0,readOnly:!0,className:"mr-2"}),e.jsx("label",{htmlFor:"cod",className:"text-gray-700  font-bold",children:"Cash On Delivery"})]})]}),e.jsxs("div",{className:"flex justify-between lg:mt-8 items-center text-lg font-bold mb-6",children:[e.jsx("span",{children:"Total:"}),e.jsxs("span",{children:["$",f.toFixed(2)]})]}),e.jsx("button",{type:"submit",className:"btn btn-primary w-full text-white font-bold text-lg",disabled:s,children:"Buy Now"})]})})]})]})}),e.jsx($,{})]})};export{G as default};
