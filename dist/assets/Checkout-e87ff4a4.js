import{b as k,f as u,F as C,a as E,r as b,B as F,h as p,o as M,p as i,j as e,L as O,G as S,H as q,I as r,J as m}from"./index-e19f1cc5.js";import{N as D,F as P}from"./Footer-2fa76d1b.js";import"./index-ab547d1b.js";const A=()=>{const o=k(),{user:j}=u(s=>s.auth),{cart:a}=u(s=>s.public),[N,{isSuccess:x}]=C(),n=E(),[d,g]=b.useState(a.reduce((s,t)=>(s[t.id]=1,s),{})),h=(s,t)=>{g(l=>{const c={...l,[s]:l[s]+t};return c[s]<1&&(c[s]=1),c})},f=a.reduce((s,t)=>s+t.price*d[t.id],0);b.useEffect(()=>{x&&(F.success("Order placed successfully"),n(p()),o("/success"))},[x,n,o]);const y={name:"",address:"",mobile:"",paymentMethod:"Cash On Delivery"},v=M({pincode:i().required("Pincode is required"),address:i().required("Address is required"),mobile:i().required("Mobile Number is required").matches(/^[0-9]+$/,"Must be a valid number")}),w=s=>{const t=a.map(l=>l._id);N({products:t,customer:j._id,...s})};return!a||a.length===0?e.jsxs("div",{className:"h-screen flex flex-col justify-center items-center",children:[e.jsx("h1",{className:"text-2xl font-semibold mb-4",children:"Cart is Empty"}),e.jsx(O,{to:"/",className:"btn btn-primary",children:"Go to Shop"})]}):e.jsxs(e.Fragment,{children:[e.jsx(D,{}),e.jsx("div",{className:"container mx-auto my-8 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 bg-white shadow-md rounded-lg p-6",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Shopping Cart"}),e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("p",{className:"text-gray-600",children:"Delivering to 382480"}),e.jsx("button",{onClick:()=>n(p()),className:"btn btn-danger",children:"Empty Cart"})]}),e.jsxs("div",{className:"alert alert-info mb-4",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"stroke-current h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("span",{children:"You've got FREE delivery. Start checkout now!"})]}),a.map(s=>e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between mb-4 p-4 border border-gray-200 rounded-lg shadow-sm hover:shadow-md transition-shadow duration-300 ease-in-out",children:[e.jsx("img",{className:"w-72 h-44 lg:w-56 lg:h-40 object-cover rounded-md shadow-md",src:`https://newecom-sdul.onrender.com/${s.image}`,alt:s.name}),e.jsxs("div",{className:"flex-grow mt-2 sm:mt-0 sm:ml-4",children:[e.jsx("h1",{className:"text-lg max-sm:text-center font-bold",children:s.name}),e.jsx("p",{className:"text-gray-500 max-sm:text-center max-sm:mt-3 font-medium",children:s.desc})]}),e.jsxs("div",{className:"flex items-center mt-2 max-sm:mt-8 sm:mt-0",children:[e.jsx("button",{onClick:()=>h(s.id,-1),className:"btn btn-outline",children:"-"}),e.jsx("span",{className:"mx-2 text-lg",children:d[s.id]}),e.jsx("button",{onClick:()=>h(s.id,1),className:"btn btn-outline",children:"+"})]}),e.jsxs("div",{className:"font-bold lg:ml-3 text-xl mt-2 max-sm:mt-7 max-sm:mb-3 tracking-widest max-sm:text-2xl sm:mt-0",children:["Rs.",s.price*d[s.id]]})]},s.id))]}),e.jsxs("div",{className:"bg-white shadow-md rounded-lg p-6",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4 text-center",children:"Your Details"}),e.jsx(S,{initialValues:y,validationSchema:v,onSubmit:w,children:({isSubmitting:s})=>e.jsxs(q,{children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Pincode"}),e.jsx(r,{type:"text",name:"pincode",placeholder:"Enter your Pincode",className:"input input-bordered w-full"}),e.jsx(m,{name:"pincode",component:"div",className:"text-red-500 text-sm mt-1"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Address"}),e.jsx(r,{type:"text",name:"address",placeholder:"Enter your address",className:"input input-bordered w-full"}),e.jsx(m,{name:"address",component:"div",className:"text-red-500 text-sm mt-1"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Mobile"}),e.jsx(r,{type:"text",name:"mobile",placeholder:"Enter your mobile number",className:"input input-bordered w-full"}),e.jsx(m,{name:"mobile",component:"div",className:"text-red-500 text-sm mt-1"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Payment Method"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(r,{type:"radio",id:"cod",name:"paymentMethod",value:"Cash On Delivery",checked:!0,readOnly:!0,className:"mr-2"}),e.jsx("label",{htmlFor:"cod",className:"text-gray-700 font-bold",children:"Cash On Delivery"})]})]}),e.jsxs("div",{className:"flex justify-between items-center text-lg font-bold mb-6",children:[e.jsx("span",{children:"Total:"}),e.jsxs("span",{children:["Rs. ",f.toFixed(2)]})]}),e.jsx("button",{type:"submit",className:"btn btn-primary w-full text-white font-bold text-lg",disabled:s,children:"Buy Now"})]})})]})]})}),e.jsx(P,{})]})};export{A as default};
