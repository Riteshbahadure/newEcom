import{r as a,n as N,o as y,p,t as w,v as S,w as M,x as $,B as t,j as e}from"./index-e19f1cc5.js";const A=()=>{const[b,j]=a.useState(null),r=N({initialValues:{name:"",email:""},validationSchema:y({name:p().required("Enter Name"),email:p().email("Invalid email format").required("Enter Email")}),onSubmit:(s,{resetForm:g})=>{E({...s,_id:b._id}),g()}}),{data:l}=w(),[k,{isSuccess:d,isError:i,error:n}]=S(),[E,{isSuccess:o,isError:c,error:u}]=M(),[f,{isSuccess:m,isError:h,error:x}]=$();a.useEffect(()=>{d&&t.success("User added successfully")},[d]),a.useEffect(()=>{o&&(t.success("User updated successfully"),window.editModal.close())},[o]),a.useEffect(()=>{m&&t.success("User deleted successfully")},[m]),a.useEffect(()=>{i&&t.error(`Error adding user: ${n.message}`),c&&t.error(`Error updating user: ${u.message}`),h&&t.error(`Error deleting user: ${x.message}`)},[i,c,h,n,u,x]);const U=s=>{j(s),r.setValues({name:s.name,email:s.email}),window.editModal.showModal()};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-right my-4",children:e.jsx("button",{className:"btn btn-primary",children:"+Add User"})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Name"}),e.jsx("th",{children:"Email"}),e.jsx("th",{children:"Role"}),e.jsx("th",{children:"Action"})]})}),e.jsx("tbody",{children:l&&l.map(s=>e.jsxs("tr",{children:[e.jsx("td",{children:s.name}),e.jsx("td",{children:s.email}),e.jsx("td",{children:s.role}),e.jsxs("td",{children:[e.jsx("button",{onClick:()=>U(s),type:"button",className:"btn btn-warning",children:"Edit"}),e.jsx("button",{onClick:()=>f(s._id),type:"button",className:"btn btn-error",children:"Delete"})]})]},s._id))})]})}),e.jsx("dialog",{id:"editModal",className:"modal",children:e.jsxs("form",{method:"dialog",className:"modal-box",onSubmit:r.handleSubmit,children:[e.jsx("button",{className:"btn btn-sm btn-circle btn-ghost absolute right-2 top-2",onClick:()=>window.editModal.close,children:"âœ•"}),e.jsx("h3",{className:"font-bold text-lg",children:"Edit User"}),e.jsx("input",{...r.getFieldProps("name"),type:"text",placeholder:"Enter Name",className:`input my-2 input-bordered w-full ${r.errors.name&&r.touched.name&&"input-error"}`}),e.jsx("input",{...r.getFieldProps("email"),type:"email",placeholder:"Enter Email",className:`input my-2 input-bordered w-full ${r.errors.email&&r.touched.email&&"input-error"}`}),e.jsx("button",{type:"submit",className:"btn btn-primary w-full",children:"Update User"})]})})]})};export{A as default};
