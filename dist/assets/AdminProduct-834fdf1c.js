import{u as b,y,z as f,A as j,n as w,o as N,p,C as m,D as P,r as a,B as d,j as e}from"./index-e19f1cc5.js";const $=()=>{const{data:c}=b(),[x,{isLoading:i,isSuccess:n}]=y(),[k,{isLoading:S,isSuccess:o}]=f(),[h,{isLoading:l,isSuccess:u}]=j(),t=w({initialValues:{name:"",desc:"",stock:"",price:"",thumb:""},validationSchema:N({name:p().required("Enter Name"),desc:p().required("Enter Description"),stock:m().required("Enter Stock").min(1,"Stock must be at least 1"),price:m().required("Enter Price").min(.01,"Price must be greater than 0"),thumb:P().required("Upload an Image")}),onSubmit:(s,{resetForm:g})=>{const r=new FormData;r.append("name",s.name),r.append("desc",s.desc),r.append("stock",s.stock),r.append("price",s.price),r.append("thumb",s.thumb),x(r),g()}});return a.useEffect(()=>{n&&(d.success("Product Added Successfully"),window.addModal.close())},[n]),a.useEffect(()=>{o&&d.success("Product Updated Successfully")},[o]),a.useEffect(()=>{u&&d.success("Product Deleted Successfully")},[u]),e.jsxs("div",{className:"p-6 bg-gray-100 min-h-screen",children:[e.jsx("div",{className:"text-right mb-4",children:e.jsx("button",{className:"btn btn-primary",onClick:()=>{window.addModal.showModal()},children:"+ Add Product"})}),e.jsx("div",{className:"overflow-x-auto bg-white shadow-md rounded-lg",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Description"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Price"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Stock"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Image"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:c&&c.map(s=>e.jsxs("tr",{className:"hover:bg-gray-50 transition duration-150 ease-in-out",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:s.name}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:s.desc}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:s.price}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:s.stock}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("img",{src:`https://newecom-sdul.onrender.com/${s.image}`,alt:s.name,className:"w-16 h-16 object-cover rounded"})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[e.jsx("button",{className:"btn btn-sm btn-warning mr-2",children:"Edit"}),e.jsx("button",{className:"btn btn-sm btn-error",onClick:()=>h(s._id),disabled:l,children:l?"Deleting...":"Delete"})]})]},s._id))})]})}),e.jsx("dialog",{id:"addModal",className:"modal",children:e.jsxs("form",{method:"dialog",className:"modal-box",onSubmit:t.handleSubmit,children:[e.jsx("button",{type:"button",className:"btn btn-sm btn-circle btn-ghost absolute right-2 top-2",onClick:()=>window.addModal.close(),children:"âœ•"}),e.jsx("h3",{className:"font-bold text-lg",children:"Add Product"}),e.jsx("div",{className:"my-4",children:t.errors&&Object.keys(t.errors).length>0&&e.jsx("pre",{className:"text-red-500 text-sm",children:JSON.stringify(t.errors,null,2)})}),e.jsx("input",{...t.getFieldProps("name"),type:"text",placeholder:"Enter Product Name",className:`input my-2 input-bordered w-full ${t.errors.name&&t.touched.name?"input-error":""}`}),e.jsx("input",{...t.getFieldProps("desc"),type:"text",placeholder:"Enter Product Description",className:`input my-2 input-bordered w-full ${t.errors.desc&&t.touched.desc?"input-error":""}`}),e.jsx("input",{...t.getFieldProps("stock"),type:"number",placeholder:"Enter Product Stock",className:`input my-2 input-bordered w-full ${t.errors.stock&&t.touched.stock?"input-error":""}`}),e.jsx("input",{...t.getFieldProps("price"),type:"number",placeholder:"Enter Product Price",className:`input my-2 input-bordered w-full ${t.errors.price&&t.touched.price?"input-error":""}`}),e.jsx("input",{onChange:s=>t.setFieldValue("thumb",s.currentTarget.files[0]),type:"file",className:`input my-2 input-bordered w-full ${t.errors.thumb&&t.touched.thumb?"input-error":""}`}),e.jsx("button",{type:"submit",className:"btn btn-primary w-full",disabled:i,children:i?"Adding...":"Add Product"})]})})]})};export{$ as default};
